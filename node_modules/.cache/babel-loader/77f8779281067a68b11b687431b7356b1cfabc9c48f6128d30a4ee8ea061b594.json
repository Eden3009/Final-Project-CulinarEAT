{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import'./css/LoginPage.css';// Make sure the path to your CSS file is correct\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LoginPage(_ref){let{setIsLoggedIn}=_ref;const[formData,setFormData]=useState({UserName:'',Password:''});const[errors,setErrors]=useState({});const[apiErrorMessage,setApiErrorMessage]=useState('');// API error message state\nconst navigate=useNavigate();// For page redirection\nconst handleChange=e=>{const{name,value}=e.target;setFormData({...formData,[name]:value});};const validate=()=>{let inputErrors={};if(!formData.UserName){inputErrors.UserName='Username is required';}if(!formData.Password){inputErrors.Password='Password is required';}return inputErrors;};const handleSubmit=async e=>{e.preventDefault();const inputErrors=validate();if(Object.keys(inputErrors).length===0){try{// Send login request to the backend\nconst response=await axios.post('http://localhost:5001/login',formData,{headers:{'Content-Type':'application/json'},withCredentials:true// Important to send cookies with the request\n});// If login is successful, update the state and localStorage\nsetIsLoggedIn(true);// Set login state\nlocalStorage.setItem('isLoggedIn','true');localStorage.setItem('userName',formData.UserName);// Store username if needed\nsetApiErrorMessage('');// Clear any previous error\n// Redirect to homepage after successful login\nnavigate('/');}catch(error){// Handle invalid login (status 401: Unauthorized)\nif(error.response&&error.response.status===401){setApiErrorMessage('Invalid username or password.');}else{setApiErrorMessage('An error occurred during login. Please try again.');console.error('Login error:',error);}}}else{setErrors(inputErrors);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"left-form-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login to CulinarEAT\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"login-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"UserName\",children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"UserName\",name:\"UserName\",value:formData.UserName,onChange:handleChange,required:true}),errors.UserName&&/*#__PURE__*/_jsxs(\"div\",{className:\"error\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-exclamation-circle icon\"}),errors.UserName]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Password\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"Password\",name:\"Password\",value:formData.Password,onChange:handleChange,required:true}),errors.Password&&/*#__PURE__*/_jsxs(\"div\",{className:\"error\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-exclamation-circle icon\"}),errors.Password]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-button\",children:\"Login\"})]}),apiErrorMessage&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-banner bounce-in\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-exclamation-circle icon\"}),apiErrorMessage]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"right-image-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"overlay-text\",children:[\"Glad to see you back! \",/*#__PURE__*/_jsx(\"br\",{}),\"Login to continue your culinary journey.\"]})})]});}export default LoginPage;","map":{"version":3,"names":["React","useState","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","LoginPage","_ref","setIsLoggedIn","formData","setFormData","UserName","Password","errors","setErrors","apiErrorMessage","setApiErrorMessage","navigate","handleChange","e","name","value","target","validate","inputErrors","handleSubmit","preventDefault","Object","keys","length","response","post","headers","withCredentials","localStorage","setItem","error","status","console","className","children","onSubmit","htmlFor","type","id","onChange","required"],"sources":["C:/Users/edens/Desktop/Final Project/src/LoginPage.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './css/LoginPage.css';  // Make sure the path to your CSS file is correct\r\n\r\nfunction LoginPage({ setIsLoggedIn }) {\r\n    const [formData, setFormData] = useState({\r\n        UserName: '',\r\n        Password: '',\r\n    });\r\n\r\n    const [errors, setErrors] = useState({});\r\n    const [apiErrorMessage, setApiErrorMessage] = useState('');  // API error message state\r\n    const navigate = useNavigate();  // For page redirection\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData({\r\n            ...formData,\r\n            [name]: value,\r\n        });\r\n    };\r\n\r\n    const validate = () => {\r\n        let inputErrors = {};\r\n        if (!formData.UserName) {\r\n            inputErrors.UserName = 'Username is required';\r\n        }\r\n        if (!formData.Password) {\r\n            inputErrors.Password = 'Password is required';\r\n        }\r\n        return inputErrors;\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        const inputErrors = validate();\r\n\r\n        if (Object.keys(inputErrors).length === 0) {\r\n            try {\r\n                // Send login request to the backend\r\n                const response = await axios.post('http://localhost:5001/login', formData, {\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                    },\r\n                    withCredentials: true,  // Important to send cookies with the request\r\n                });\r\n\r\n                // If login is successful, update the state and localStorage\r\n                setIsLoggedIn(true);  // Set login state\r\n                localStorage.setItem('isLoggedIn', 'true');\r\n                localStorage.setItem('userName', formData.UserName);  // Store username if needed\r\n                setApiErrorMessage('');  // Clear any previous error\r\n\r\n                // Redirect to homepage after successful login\r\n                navigate('/');  \r\n\r\n            } catch (error) {\r\n                // Handle invalid login (status 401: Unauthorized)\r\n                if (error.response && error.response.status === 401) {\r\n                    setApiErrorMessage('Invalid username or password.');\r\n                } else {\r\n                    setApiErrorMessage('An error occurred during login. Please try again.');\r\n                    console.error('Login error:', error);\r\n                }\r\n            }\r\n        } else {\r\n            setErrors(inputErrors);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"login-page\">\r\n            {/* Left side login form */}\r\n            <div className=\"left-form-container\">\r\n                <div className=\"form-container\">\r\n                    <h2>Login to CulinarEAT</h2>\r\n                    <form onSubmit={handleSubmit} className=\"login-form\">\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"UserName\">Username:</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                id=\"UserName\"\r\n                                name=\"UserName\"\r\n                                value={formData.UserName}\r\n                                onChange={handleChange}\r\n                                required\r\n                            />\r\n                            {errors.UserName && (\r\n                                <div className=\"error\">\r\n                                    <i className=\"fas fa-exclamation-circle icon\"></i>\r\n                                    {errors.UserName}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"Password\">Password:</label>\r\n                            <input\r\n                                type=\"password\"\r\n                                id=\"Password\"\r\n                                name=\"Password\"\r\n                                value={formData.Password}\r\n                                onChange={handleChange}\r\n                                required\r\n                            />\r\n                            {errors.Password && (\r\n                                <div className=\"error\">\r\n                                    <i className=\"fas fa-exclamation-circle icon\"></i>\r\n                                    {errors.Password}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        <button type=\"submit\" className=\"submit-button\">Login</button>\r\n                    </form>\r\n\r\n                    {/* Display API error message */}\r\n                    {apiErrorMessage && (\r\n                        <div className=\"error-banner bounce-in\">\r\n                            <i className=\"fas fa-exclamation-circle icon\"></i>\r\n                            {apiErrorMessage}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Right side background image with text */}\r\n            <div className=\"right-image-container\">\r\n                <div className=\"overlay-text\">\r\n                    Glad to see you back! <br />\r\n                    Login to continue your culinary journey.\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default LoginPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}